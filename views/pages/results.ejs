<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
    <title>Activity</title>
</head>
<body>
    <%- include('../partials/studentNavbar') %>
    <div class="main m-0 p-4 center-items">
        <div class="activity-result m-0 p-2">
            <div class="progress-container mx-auto">
                <svg class="progress-svg" viewBox="0 0 100 100">
                    <circle class="progress-circle" cx="50" cy="50" r="45"></circle>
                    <circle class="progress-bar" cx="50" cy="50" r="45"></circle>
                </svg>
                <div class="progress-text">
                    <span class="progress-number">0</span>%
                </div>
            </div>
            <div class="information text-center">
                <h3>You have finished this activity!</h3>
                <a href="/todos" class="btn btn-outline-primary mt-3">Go back</a>
            </div>
        </div>
        <script>
            function animateProgressBar(progress) {
                const bar = document.querySelector('.progress-bar')
                const number = document.querySelector('.progress-number')
                const circumference = 2 * Math.PI * bar.getAttribute('r')
                const offset = circumference - progress / 100 * circumference
                bar.style.strokeDashoffset = circumference
                bar.style.strokeDasharray = `${circumference} ${circumference}`
                number.textContent = 0

                bar.style.strokeDashoffset = offset
                number.textContent = Math.round(Number(progress))
                bar.animate([{ strokeDashoffset: circumference }, { strokeDashoffset: offset }], { duration: 1000, easing: 'ease-out' })
            }
          
          animateProgressBar(<%= (Number(score) / Number(total)) * 100 %>)
        </script>
    </div>
</body>
</html>